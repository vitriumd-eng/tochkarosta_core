"""
Chat API routes - –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤
–ü–æ–ª–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –¢–æ—á–∫–∞.–†–æ—Å—Ç–∞
"""
from fastapi import APIRouter, HTTPException
from pydantic import BaseModel
from typing import List, Optional, Dict, Any
import re

router = APIRouter(prefix="/api/chat", tags=["chat"])


class ChatMessage(BaseModel):
    role: str  # "user" or "assistant"
    content: str


class ChatRequest(BaseModel):
    message: str
    history: Optional[List[ChatMessage]] = []


class ChatResponse(BaseModel):
    message: str
    template: Optional[str] = None  # "list", "cards", "buttons", "text", "comparison", "steps"
    data: Optional[Dict[str, Any]] = None  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —à–∞–±–ª–æ–Ω–∞
    suggestions: Optional[List[str]] = []


# –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ —Å —à–∞–±–ª–æ–Ω–∞–º–∏
PLATFORM_KNOWLEDGE = {
    "–º–æ–¥—É–ª–∏": {
        "keywords": ["–º–æ–¥—É–ª—å", "–º–æ–¥—É–ª–∏", "—á—Ç–æ –º–æ–∂–Ω–æ", "–∫–∞–∫–∏–µ –µ—Å—Ç—å", "—Ç–∏–ø—ã", "–≤–∞—Ä–∏–∞–Ω—Ç—ã", "–º–∞–≥–∞–∑–∏–Ω", "–ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ", "–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è", "–±–ª–æ–≥"],
        "template": "cards",
        "response": "–ù–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –¢–æ—á–∫–∞.–†–æ—Å—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≥–æ—Ç–æ–≤—ã–µ –º–æ–¥—É–ª–∏:",
        "data": {
            "cards": [
                {
                    "title": "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω",
                    "description": "–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω —Å –∫–æ—Ä–∑–∏–Ω–æ–π, –æ–ø–ª–∞—Ç–æ–π, –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞–º–∏",
                    "icon": "üõí"
                },
                {
                    "title": "–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ",
                    "description": "–î–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–æ–≤, –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤, –∞—Ä—Ç–∏—Å—Ç–æ–≤. –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ä–∞–±–æ—Ç—ã –∏ –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –∑–∞–∫–∞–∑—ã",
                    "icon": "üì∏"
                },
                {
                    "title": "–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è",
                    "description": "–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π, –ø—Ä–æ–¥–∞–∂–∞ –±–∏–ª–µ—Ç–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏",
                    "icon": "üé´"
                },
                {
                    "title": "–ë–ª–æ–≥",
                    "description": "–í–µ–¥–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, SEO-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è",
                    "icon": "üìù"
                },
                {
                    "title": "–ò –¥—Ä—É–≥–∏–µ",
                    "description": "–ú–æ–¥—É–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è. –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏–∑ –∫–æ—Ä–æ–±–∫–∏",
                    "icon": "‚ûï"
                }
            ]
        }
    },
    "—Å—Ç–æ–∏–º–æ—Å—Ç—å": {
        "keywords": ["—Ü–µ–Ω–∞", "—Å—Ç–æ–∏–º–æ—Å—Ç—å", "—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç", "—Ç–∞—Ä–∏—Ñ", "—Ç–∞—Ä–∏—Ñ—ã", "–ø–æ–¥–ø–∏—Å–∫–∞", "–¥–µ–Ω—å–≥–∏", "–æ–ø–ª–∞—Ç–∞", "–ø–ª–∞—Ç–µ–∂", "—Å—Ç–æ–∏—Ç"],
        "template": "comparison",
        "response": "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏:",
        "data": {
            "comparison": {
                "traditional": {
                    "title": "–ê–≥–µ–Ω—Ç—Å—Ç–≤–æ + –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞",
                    "price": "~150 000 ‚ÇΩ",
                    "features": ["–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å –Ω—É–ª—è", "–î–æ–ª–≥–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ (–º–µ—Å—è—Ü—ã)", "–î–æ—Ä–æ–≥–æ", "–ù—É–∂–Ω—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã"]
                },
                "platform": {
                    "title": "–¢–æ—á–∫–∞ –†–æ—Å—Ç–∞",
                    "price": "–æ—Ç 5 000 ‚ÇΩ/–º–µ—Å",
                    "features": ["–ì–æ—Ç–æ–≤—ã–µ –º–æ–¥—É–ª–∏", "–ó–∞–ø—É—Å–∫ –∑–∞ 60 —Å–µ–∫—É–Ω–¥", "–í 30 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ", "–ë–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤"]
                },
                "note": "–ú—ã –Ω–µ –±–µ—Ä–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç —Å –æ–±–æ—Ä–æ—Ç–∞ ‚Äî –≤—Å–µ –¥–µ–Ω—å–≥–∏ –æ—Ç –ø—Ä–æ–¥–∞–∂ –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –≤–∞–º –Ω–∞ —Å—á–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä—è–º—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é (–ÆKassa, –°–ë–ü, P2P)."
            }
        }
    },
    "ai": {
        "keywords": ["ai", "–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç", "–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä", "–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è", "–∫–æ–Ω—Ç–µ–Ω—Ç", "–±–∞–Ω–Ω–µ—Ä", "–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ", "–º–∞—Ä–∫–µ—Ç–∏–Ω–≥"],
        "template": "list",
        "response": "–í –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã AI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:",
        "data": {
            "items": [
                {
                    "icon": "‚ú®",
                    "title": "AI –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞",
                    "description": "–°–æ–∑–¥–∞–µ—Ç –ø–æ—Å—Ç—ã, –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –∏ —Ä–µ–∫–ª–∞–º–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –∑–∞ —Å–µ–∫—É–Ω–¥—ã. –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–≥–æ —Å—Ç–∏–ª—è"
                },
                {
                    "icon": "üé®",
                    "title": "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",
                    "description": "–°–æ–∑–¥–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞. –ù–µ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å —Å—Ç–æ–∫–∏"
                },
                {
                    "icon": "üñºÔ∏è",
                    "title": "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –±–∞–Ω–Ω–µ—Ä–æ–≤",
                    "description": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–µ –±–∞–Ω–Ω–µ—Ä—ã –¥–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏"
                },
                {
                    "icon": "‚ö°",
                    "title": "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞",
                    "description": "–ö–Ω–æ–ø–∫–∞ '–ù–æ–≤–æ–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ' –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –±–∞–Ω–Ω–µ—Ä, –ø–∏—à–µ—Ç —Ç–µ–∫—Å—Ç –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –≤–æ –≤—Å–µ –∫–∞–Ω–∞–ª—ã (Telegram, VK)"
                }
            ]
        }
    },
    "–Ω–∞—á–∞–ª–æ": {
        "keywords": ["–Ω–∞—á–∞—Ç—å", "–∫–∞–∫ –Ω–∞—á–∞—Ç—å", "—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è", "—Å—Ç–∞—Ä—Ç", "–∑–∞–ø—É—Å–∫", "–ø–µ—Ä–≤—ã–π —à–∞–≥", "–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç", "–Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É"],
        "template": "steps",
        "response": "–ù–∞—á–∞—Ç—å –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ:",
        "data": {
            "steps": [
                {
                    "number": "1",
                    "title": "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å",
                    "description": "–ü–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É, –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö —Ñ–æ—Ä–º. –ü–æ–ª—É—á–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"
                },
                {
                    "number": "2",
                    "title": "–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥—É–ª—å",
                    "description": "–ú–∞–≥–∞–∑–∏–Ω, –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏ —Ç.–¥. –í—Å–µ –≥–æ—Ç–æ–≤–æ –∏–∑ –∫–æ—Ä–æ–±–∫–∏"
                },
                {
                    "number": "3",
                    "title": "–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–∑–∞–π–Ω",
                    "description": "–ó–∞ 60 —Å–µ–∫—É–Ω–¥, –±–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –ì–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã"
                },
                {
                    "number": "4",
                    "title": "–ù–∞—á–Ω–∏—Ç–µ –ø—Ä–æ–¥–∞–≤–∞—Ç—å",
                    "description": "–í—Å–µ –≥–æ—Ç–æ–≤–æ! –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏ –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –∑–∞–∫–∞–∑—ã"
                }
            ]
        }
    },
    "–∏–∑–æ–ª—è—Ü–∏—è": {
        "keywords": ["–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å", "–∏–∑–æ–ª—è—Ü–∏—è", "–¥–∞–Ω–Ω—ã–µ", "–∑–∞—â–∏—Ç–∞", "ddos", "–±–µ–∑–æ–ø–∞—Å–Ω–æ", "–∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å"],
        "template": "text",
        "response": """üîí **–ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**

–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏ –±–∏–∑–Ω–µ—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –±–ª–∞–≥–æ–¥–∞—Ä—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Vertical Slices.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
‚úÖ –ö–∞–∂–¥—ã–π –±–∏–∑–Ω–µ—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
‚úÖ –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –º–µ–∂–¥—É –º–∞–≥–∞–∑–∏–Ω–∞–º–∏
‚úÖ –î–∞–∂–µ –µ—Å–ª–∏ –æ–¥–∏–Ω –º–∞–≥–∞–∑–∏–Ω –ø–æ—Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç DDoS-–∞—Ç–∞–∫–∏, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
‚úÖ –Ø–¥—Ä–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∑–∞—â–∏—â–µ–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
‚Ä¢ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç —Ç–æ–ª—å–∫–æ –≤–∞–º
‚Ä¢ –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –≤–∞—à–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
‚Ä¢ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö"""
    },
    "–≤—Ä–µ–º—è": {
        "keywords": ["–≤—Ä–µ–º—è", "—Å–∫–æ—Ä–æ—Å—Ç—å", "–±—ã—Å—Ç—Ä–æ", "—Ä—É—Ç–∏–Ω–∞", "—ç–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏", "60 —Å–µ–∫—É–Ω–¥", "–±—ã—Å—Ç—Ä—ã–π"],
        "template": "comparison",
        "response": "–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏:",
        "data": {
            "comparison": {
                "before": {
                    "title": "–ë—ã–ª–æ",
                    "value": "4—á/–¥–µ–Ω—å",
                    "description": "–ù–∞ —Ä—É—Ç–∏–Ω—É: –ø–µ—Ä–µ–ø–∏—Å–∫–∏ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è, –æ–∂–∏–¥–∞–Ω–∏—è, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
                },
                "after": {
                    "title": "–°—Ç–∞–ª–æ",
                    "value": "15 –º–∏–Ω/–¥–µ–Ω—å",
                    "description": "–° –¢–æ—á–∫–æ–π –†–æ—Å—Ç–∞ –≤—Ä–µ–º—è –Ω–∞ —Ä—É—Ç–∏–Ω—É —Å–≤–æ–¥–∏—Ç—Å—è –∫ –Ω—É–ª—é. –í—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å –±–∏–∑–Ω–µ—Å–æ–º, –∞ –Ω–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏"
                }
            }
        }
    },
    "3d": {
        "keywords": ["3d", "–≤–∏—Ç—Ä–∏–Ω–∞", "–º–æ–¥–µ–ª—å", "—Ç–æ–≤–∞—Ä", "—Ç—Ä–µ—Ö–º–µ—Ä–Ω—ã–π", "three.js"],
        "template": "text",
        "response": """üéØ **3D-–≤–∏—Ç—Ä–∏–Ω—ã –∏–∑ –∫–æ—Ä–æ–±–∫–∏**

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 3D-–≤–∏—Ç—Ä–∏–Ω—ã –∏–∑ –∫–æ—Ä–æ–±–∫–∏ (Three.js).

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
‚úÖ –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ 3D-–º–æ–¥–µ–ª–∏ —Ç–æ–≤–∞—Ä–æ–≤
‚úÖ –ü–æ–∫—É–ø–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—Ä–∞—â–∞—Ç—å –∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã
‚úÖ –ü–æ–≤—ã—à–∞–µ—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏—é –Ω–∞ 30-40%
‚úÖ –î–µ–ª–∞–µ—Ç –ø–æ–∫—É–ø–∫–∏ –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤: GLTF, OBJ, FBX
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π
‚Ä¢ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

–ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!"""
    },
    "–ø–ª–∞—Ç–µ–∂–∏": {
        "keywords": ["–ø–ª–∞—Ç–µ–∂", "–ø–ª–∞—Ç–µ–∂–∏", "–æ–ø–ª–∞—Ç–∞", "–¥–µ–Ω—å–≥–∏", "—ékassa", "—Å–±–ø", "p2p", "–∫–∞—Å—Å–∞", "–æ–±–æ—Ä–æ—Ç", "–ø—Ä–æ—Ü–µ–Ω—Ç"],
        "template": "text",
        "response": """üí≥ **–ü–ª–∞—Ç–µ–∂–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–ª–∞—Ç–µ–∂–∏:**

**B2B (–ü–æ–¥–ø–∏—Å—á–∏–∫ –ø–ª–∞—Ç–∏—Ç –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ):**
‚Ä¢ –ó–∞ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –º–æ–¥—É–ª–∏
‚Ä¢ –î–µ–Ω—å–≥–∏ –∏–¥—É—Ç –Ω–∞ —Å—á–µ—Ç –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã
‚Ä¢ –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∞—Ä–∏—Ñ–æ–≤

**B2C (–ü–æ–∫—É–ø–∞—Ç–µ–ª—å –ø–ª–∞—Ç–∏—Ç –ú–∞–≥–∞–∑–∏–Ω—É):**
‚Ä¢ –ó–∞ —Ç–æ–≤–∞—Ä—ã, –∫—É—Ä—Å—ã, —É—Å–ª—É–≥–∏
‚Ä¢ –ü—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: –ÆKassa, –°–ë–ü, P2P
‚Ä¢ –î–µ–Ω—å–≥–∏ –∏–¥—É—Ç **–Ω–∞–ø—Ä—è–º—É—é –Ω–∞ –≤–∞—à —Å—á–µ—Ç**

**–í–∞–∂–Ω–æ:**
‚úÖ –ú—ã –ù–ï –±–µ—Ä–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç —Å –æ–±–æ—Ä–æ—Ç–∞
‚úÖ –ú—ã –ù–ï "—Ö–æ–ª–¥–∏—Ä—É–µ–º" –≤–∞—à–∏ –¥–µ–Ω—å–≥–∏
‚úÖ –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –≤—Å–µ –¥–µ–Ω—å–≥–∏ –Ω–∞–ø—Ä—è–º—É—é
‚úÖ –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã:**
‚Ä¢ –ÆKassa (–∫–∞—Ä—Ç—ã, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏)
‚Ä¢ –°–ë–ü (–°–∏—Å—Ç–µ–º–∞ –±—ã—Å—Ç—Ä—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π)
‚Ä¢ P2P –ø–µ—Ä–µ–≤–æ–¥—ã"""
    },
    "–¥–æ–º–µ–Ω": {
        "keywords": ["–¥–æ–º–µ–Ω", "–ø–æ–¥–¥–æ–º–µ–Ω", "url", "–∞–¥—Ä–µ—Å", "—Å–∞–π—Ç", "—Å—Å—ã–ª–∫–∞", "dns"],
        "template": "text",
        "response": """üåê **–î–æ–º–µ–Ω—ã –∏ –ø–æ–¥–¥–æ–º–µ–Ω—ã**

–ö–∞–∂–¥—ã–π –±–∏–∑–Ω–µ—Å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø–æ–¥–¥–æ–º–µ–Ω.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
‚úÖ –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–¥–¥–æ–º–µ–Ω
‚úÖ –§–æ—Ä–º–∞—Ç: –≤–∞—à-–ø–æ–¥–¥–æ–º–µ–Ω.tochkarosta.ru
‚úÖ –ú–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–≤–æ–π –¥–æ–º–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º:**
‚Ä¢ –°—Ç–∞—Ä—Ç: 1 –ø–æ–¥–¥–æ–º–µ–Ω
‚Ä¢ –ë–∏–∑–Ω–µ—Å: 2 –ø–æ–¥–¥–æ–º–µ–Ω–∞
‚Ä¢ –ü—Ä–æ: 10 –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
‚Ä¢ –ö–∞–∂–¥—ã–π –ø–æ–¥–¥–æ–º–µ–Ω –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω
‚Ä¢ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚Ä¢ –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"""
    },
    "—Ä–æ–ª–∏": {
        "keywords": ["—Ä–æ–ª—å", "—Ä–æ–ª–∏", "–¥–æ—Å—Ç—É–ø", "–ø—Ä–∞–≤–∞", "–≤–ª–∞–¥–µ–ª–µ—Ü", "–º–æ–¥–µ—Ä–∞—Ç–æ—Ä", "–æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å", "–ø–æ–¥–ø–∏—Å—á–∏–∫"],
        "template": "list",
        "response": "–†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø—ã –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ:",
        "data": {
            "items": [
                {
                    "icon": "üëë",
                    "title": "–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å",
                    "description": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π, —Ç–∞—Ä–∏—Ñ–∞–º–∏, –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º–∏. –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø"
                },
                {
                    "icon": "üõ°Ô∏è",
                    "title": "–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä",
                    "description": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ª–µ–Ω–¥–∏–Ω–≥–∞ (SEO, –Ω–æ–≤–æ—Å—Ç–∏)"
                },
                {
                    "icon": "üë§",
                    "title": "–í–ª–∞–¥–µ–ª–µ—Ü (–ü–æ–¥–ø–∏—Å—á–∏–∫)",
                    "description": "–í—Ö–æ–¥ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º –±–∏–∑–Ω–µ—Å–æ–º: —Ç–æ–≤–∞—Ä—ã, –∑–∞–∫–∞–∑—ã, –¥–∏–∑–∞–π–Ω"
                },
                {
                    "icon": "üõí",
                    "title": "–ö–ª–∏–µ–Ω—Ç (–ü–æ–∫—É–ø–∞—Ç–µ–ª—å)",
                    "description": "–ü–æ–∫—É–ø–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –Ø–¥—Ä—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"
                }
            ]
        }
    },
    "—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏": {
        "keywords": ["—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è", "—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞", "–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–ª–∞–π—Å—ã", "vertical slices", "—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫"],
        "template": "text",
        "response": """‚öôÔ∏è **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
‚Ä¢ Vertical Slices ‚Äî –ø–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞
‚Ä¢ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚Ä¢ –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:**
‚Ä¢ Backend: FastAPI (Python)
‚Ä¢ Frontend: Next.js (React)
‚Ä¢ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL
‚Ä¢ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: Redis
‚Ä¢ 3D-–≥—Ä–∞—Ñ–∏–∫–∞: Three.js

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å ‚Äî –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏
‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å ‚Äî –ø–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –º–æ–¥—É–ª—è –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî –∏–∑–æ–ª—è—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞"""
    },
    "–ø–æ–¥–¥–µ—Ä–∂–∫–∞": {
        "keywords": ["–ø–æ–¥–¥–µ—Ä–∂–∫–∞", "–ø–æ–º–æ—â—å", "–≤–æ–ø—Ä–æ—Å", "–∫–æ–Ω—Ç–∞–∫—Ç—ã", "—Å–≤—è–∑–∞—Ç—å—Å—è", "—Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞"],
        "template": "text",
        "response": """üí¨ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –ø–æ–º–æ—â—å**

–ú—ã –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å!

**–°–ø–æ—Å–æ–±—ã —Å–≤—è–∑–∏:**
‚Ä¢ –ß–µ—Ä–µ–∑ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π
‚Ä¢ Email –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚Äî –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã
‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
‚Ä¢ –≠—Ç–æ—Ç —á–∞—Ç ‚Äî AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç 24/7

**–ß—Ç–æ –º—ã –ø–æ–º–æ–≥–∞–µ–º:**
‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥—É–ª–µ–π
‚úÖ –í–æ–ø—Ä–æ—Å—ã –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º
‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
‚úÖ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:**
‚Ä¢ Email: –¥–æ 24 —á–∞—Å–æ–≤
‚Ä¢ –ß–∞—Ç: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç)
‚Ä¢ –°—Ä–æ—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞ —Ç–∞—Ä–∏—Ñ–µ –ü—Ä–æ"""
    },
    "–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ": {
        "keywords": ["–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ", "—Ä–æ—Å—Ç", "—Ä–∞–∑–≤–∏—Ç–∏–µ", "—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ", "–±–æ–ª—å—à–µ", "—É–≤–µ–ª–∏—á–∏—Ç—å"],
        "template": "text",
        "response": """üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å–∞**

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ä–∞—Å—Ç–µ—Ç –≤–º–µ—Å—Ç–µ —Å –≤–∞—à–∏–º –±–∏–∑–Ω–µ—Å–æ–º.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–æ—Å—Ç–∞:**
‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏
‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ (–ø–æ —Ç–∞—Ä–∏—Ñ—É)
‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úÖ –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

**–¢–∞—Ä–∏—Ñ—ã –¥–ª—è —Ä–æ—Å—Ç–∞:**
‚Ä¢ –°—Ç–∞—Ä—Ç ‚Äî –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã
‚Ä¢ –ë–∏–∑–Ω–µ—Å ‚Äî –¥–ª—è —Ä–∞—Å—Ç—É—â–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞
‚Ä¢ –ü—Ä–æ ‚Äî –¥–ª—è –º–∞—Å—à—Ç–∞–±–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:**
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚Ä¢ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö"""
    },
    "–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏": {
        "keywords": ["–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è", "–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏", "–ø–æ–¥–∫–ª—é—á–∏—Ç—å", "api", "telegram", "vk", "—Å–æ—Ü—Å–µ—Ç–∏"],
        "template": "list",
        "response": "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:",
        "data": {
            "items": [
                {
                    "icon": "üí≥",
                    "title": "–ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã",
                    "description": "–ÆKassa, –°–ë–ü, P2P ‚Äî –ø—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, –¥–µ–Ω—å–≥–∏ –∏–¥—É—Ç –≤–∞–º"
                },
                {
                    "icon": "üì±",
                    "title": "–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏",
                    "description": "Telegram, VK ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤"
                },
                {
                    "icon": "üìß",
                    "title": "Email –∏ SMS",
                    "description": "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤"
                },
                {
                    "icon": "üîå",
                    "title": "API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤",
                    "description": "REST API –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (–Ω–∞ —Ç–∞—Ä–∏—Ñ–µ –ü—Ä–æ)"
                }
            ]
        }
    },
    "–∫–æ–Ω–≤–µ—Ä—Å–∏—è": {
        "keywords": ["–∫–æ–Ω–≤–µ—Ä—Å–∏—è", "–ø—Ä–æ–¥–∞–∂–∏", "—Ä–æ—Å—Ç –ø—Ä–æ–¥–∞–∂", "—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å", "—Ä–µ–∑—É–ª—å—Ç–∞—Ç"],
        "template": "text",
        "response": """üìä **–†–æ—Å—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏**

–ù–∞—à–∏ –∫–ª–∏–µ–Ω—Ç—ã –≤–∏–¥—è—Ç —Ä–æ—Å—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –¥–æ +320% –∑–∞ –ø–æ–ª–≥–æ–¥–∞.

**–ß—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç —Ä–æ—Å—Ç—É:**
‚úÖ 3D-–≤–∏—Ç—Ä–∏–Ω—ã ‚Äî –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ –ª—É—á—à–µ –≤–∏–¥—è—Ç —Ç–æ–≤–∞—Ä—ã
‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ ‚Äî –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è ‚Äî –æ—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
‚úÖ AI-–∫–æ–Ω—Ç–µ–Ω—Ç ‚Äî –ø—Ä–æ–¥–∞—é—â–∏–µ —Ç–µ–∫—Å—Ç—ã –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
‚Ä¢ –°—Ä–µ–¥–Ω–∏–π —Ä–æ—Å—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏: +320% –∑–∞ 6 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —á–µ–∫–∞: +25%
‚Ä¢ –°–Ω–∏–∂–µ–Ω–∏–µ –æ—Ç–∫–∞–∑–æ–≤: -40%

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:**
‚Ä¢ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–æ–≤–∞—Ä–∞–º"""
    },
    "seo": {
        "keywords": ["seo", "–ø–æ–∏—Å–∫–æ–≤–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è", "–ø–æ–∏—Å–∫", "—è–Ω–¥–µ–∫—Å", "google", "–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ", "—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ"],
        "template": "text",
        "response": """üîç **SEO –∏ –ø–æ–∏—Å–∫–æ–≤–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º.

**–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ SEO-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞-—Ç–µ–≥–æ–≤
‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ URL-–∞–¥—Ä–µ—Å–∞
‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (Schema.org)
‚úÖ Sitemap.xml –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

**–ú–æ–¥—É–ª—å –ë–ª–æ–≥ –≤–∫–ª—é—á–∞–µ—Ç:**
‚Ä¢ SEO-—Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç–∞—Ç—å–∏
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ H1-H6
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
‚Ä¢ –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–µ—Ä–µ–ª–∏–Ω–∫–æ–≤–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
‚Ä¢ –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ
‚Ä¢ –í—ã—Å–æ–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ –ø–æ–∏—Å–∫–µ
‚Ä¢ –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–π —Ç—Ä–∞—Ñ–∏–∫ —Ä–∞—Å—Ç–µ—Ç

**–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç:**
‚Ä¢ SEO-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ª–µ–Ω–¥–∏–Ω–≥–∞
‚Ä¢ –ú–µ—Ç–∞-—Ç–µ–≥–∞–º–∏ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚Ä¢ –ù–æ–≤–æ—Å—Ç—è–º–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è–º–∏"""
    },
    "–∞–Ω–∞–ª–∏—Ç–∏–∫–∞": {
        "keywords": ["–∞–Ω–∞–ª–∏—Ç–∏–∫–∞", "—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", "–º–µ—Ç—Ä–∏–∫–∏", "–¥–∞–Ω–Ω—ã–µ", "–æ—Ç—á–µ—Ç—ã"],
        "template": "list",
        "response": "–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:",
        "data": {
            "items": [
                {
                    "icon": "üìà",
                    "title": "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂",
                    "description": "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤, –≤—ã—Ä—É—á–∫–∏, –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤"
                },
                {
                    "icon": "üë•",
                    "title": "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π",
                    "description": "–ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ–Ω–≤–µ—Ä—Å–∏—è"
                },
                {
                    "icon": "üí∞",
                    "title": "–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞",
                    "description": "–î–æ—Ö–æ–¥—ã, —Ä–∞—Å—Ö–æ–¥—ã, –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º"
                },
                {
                    "icon": "üìä",
                    "title": "–û—Ç—á–µ—Ç—ã",
                    "description": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"
                }
            ]
        }
    },
    "–º–æ–±–∏–ª—å–Ω–∞—è": {
        "keywords": ["–º–æ–±–∏–ª—å–Ω–∞—è", "–º–æ–±–∏–ª—å–Ω—ã–π", "—Ç–µ–ª–µ—Ñ–æ–Ω", "–ø–ª–∞–Ω—à–µ—Ç", "–∞–¥–∞–ø—Ç–∏–≤", "responsive"],
        "template": "text",
        "response": """üì± **–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è**

–í—Å–µ –º–æ–¥—É–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.

**–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω:**
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –ª—é–±–æ–π —ç–∫—Ä–∞–Ω
‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤ –∏ –ø–ª–∞–Ω—à–µ—Ç–æ–≤
‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö
‚úÖ –£–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –æ–¥–Ω–∏–º –ø–∞–ª—å—Ü–µ–º

**–ú–æ–±–∏–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞
‚Ä¢ –ë—ã—Å—Ç—Ä–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –º–æ–±–∏–ª—å–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏
‚Ä¢ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚Ä¢ –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
‚Ä¢ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü < 2 —Å–µ–∫—É–Ω–¥
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
‚Ä¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö"""
    }
}

DEFAULT_RESPONSE = {
    "template": "text",
    "response": "–ù–∞ —ç—Ç–æ–º –º–æ–∏ –ø–æ–ª–Ω–æ–º–æ—á–∏—è –∫–∞–∫ –±—ã –≤—Å–µ! –ò–∑–≤–∏–Ω–∏—Ç–µ",
    "data": None
}


def find_relevant_response(message: str) -> Dict[str, Any]:
    """–ù–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –ø–æ–∏—Å–∫–æ–º"""
    message_lower = message.lower()
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∑–Ω–∞–Ω–∏–π
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–≤—ã–º–∏
    for category, data in PLATFORM_KNOWLEDGE.items():
        for keyword in data["keywords"]:
            if keyword in message_lower:
                return {
                    "message": data["response"],
                    "template": data.get("template", "text"),
                    "data": data.get("data")
                }
    
    return DEFAULT_RESPONSE


@router.post("/message", response_model=ChatResponse)
async def chat_message(request: ChatRequest):
    """
    –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç
    """
    if not request.message or not request.message.strip():
        raise HTTPException(status_code=400, detail="Message cannot be empty")
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
    response_data = find_relevant_response(request.message)
    
    # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
    suggestions = [
        "–ö–∞–∫–∏–µ –º–æ–¥—É–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã?",
        "–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞?",
        "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–ª–∞—Ç–µ–∂–∏?",
        "–ö–∞–∫–∏–µ AI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –µ—Å—Ç—å?",
        "–ö–∞–∫ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É?",
        "–†–∞—Å—Å–∫–∞–∂–∏ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
    ]
    
    return ChatResponse(
        message=response_data["message"],
        template=response_data.get("template", "text"),
        data=response_data.get("data"),
        suggestions=suggestions
    )


@router.get("/health")
async def chat_health():
    """Health check –¥–ª—è —á–∞—Ç–∞"""
    return {"status": "ok", "service": "chat"}
